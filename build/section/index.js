(()=>{"use strict";const e=window.wp.blocks,t=window.wp.element,l=window.wp.blockEditor,a=window.wp.components,n=window.wp.i18n;function o(e){const{buttonData:l,active:n}=e,[o,c]=(0,t.useState)(null);return(0,t.useEffect)((()=>{c(n)}),[n]),(0,t.createElement)(t.Fragment,null,(0,t.createElement)(a.ButtonGroup,null,(0,t.createElement)(i,{active:o,buttonData:l,onActiveButton:t=>(t=>{e.parentCallback(t)})(t)})))}function i(e){let{buttonData:l=[],onActiveButton:n,active:o}=e;const i=[];return l.forEach((e=>{i.push((0,t.createElement)(a.Button,{key:e,variant:e===o?"primary":"secondary",onClick:()=>n(e)},e))})),i}function c(e){let{mediaProps:i,imageProps:c,mediaCallback:s,imagePropsCallback:r}=e;const[m,u]=(0,t.useState)({id:null,url:"",sizes:[],alt:"",type:"",width:0,height:0}),[p,d]=(0,t.useState)({imageFit:null,imagePosition:null,imageEffect:null,imageFilter:null});(0,t.useEffect)((()=>{i&&u({...i}),c&&d({...c})}),[i,c]);const C=(e,t)=>{const l={...p};l[e]=t;const a=[(n=l).imageEffect,n.imageFilter,n.imageScale,"object-"+n.imageFit,"object-"+n.imagePosition,"max-w-full","max-h-full"].join(" ");var n;r({...l},a)},g=e=>{const t=["large","medium","thumbnail"],l=[];for(const a in e.sizes)t.includes(a)&&(l[a]=e.sizes[a].url);const a={id:e.id,url:e.url,sizes:l,alt:e.alt,type:e.type,width:e.width,height:e.height};s({...a})};return(0,t.createElement)(t.Fragment,null,(0,t.createElement)(a.PanelRow,null,null!==m.id&&(0,t.createElement)(l.MediaUploadCheck,null,(0,t.createElement)(l.MediaUpload,{onSelect:g,value:m.id,allowedTypes:["image","video"],render:e=>{let{open:l}=e;return(0,t.createElement)(a.Button,{className:0==m.id?"editor-post-featured-image__toggle":"editor-post-featured-image__preview",onClick:l},0==m.id&&(0,n.__)("Choose an image","ponzoblocks"),m.id&&(0,t.createElement)("div",{className:"ponzo--editor-visual-image"},(0,t.createElement)("img",{src:m.url})))}})),0!=m.id&&(0,t.createElement)(l.MediaUploadCheck,null,(0,t.createElement)(l.MediaUpload,{title:(0,n.__)("Replace image","ponzoblocks"),value:m.id,onSelect:g,allowedTypes:["image"],render:e=>{let{open:l}=e;return(0,t.createElement)(a.Button,{onClick:l},(0,n.__)("Replace image","ponzoblocks"))}})),0!=m.id&&(0,t.createElement)(l.MediaUploadCheck,null,(0,t.createElement)(a.Button,{onClick:()=>{s({mediaId:0,mediaUrl:""})},isDestructive:!0},(0,n.__)("Remove image","ponzoblocks")))),(0,t.createElement)(a.PanelRow,null,(0,t.createElement)(o,{buttonData:["contain","cover","fill"],active:p.imageFit,parentCallback:e=>C("imageFit",e)})),(0,t.createElement)(a.PanelRow,null,(0,t.createElement)(a.SelectControl,{label:"Image Position",value:p.imagePosition,options:[{label:"Center",value:"center"},{label:"Bottom",value:"bottom"},{label:"Top",value:"top"},{label:"Left",value:"left"},{label:"Left Bottom",value:"left-bottom"},{label:"Left Top",value:"left-top"},{label:"Right",value:"right"},{label:"Right Bottom",value:"right"},{label:"Right Top",value:"right-top"}],onChange:e=>C("imagePosition",e)})),(0,t.createElement)(a.PanelRow,null,(0,t.createElement)(a.SelectControl,{label:"Effect",value:p.imageEffect,options:[{label:"Opacity 100",value:""},{label:"Opacity 90",value:"opacity-90"},{label:"Opacity 80",value:"opacity-80"},{label:"Opacity 50",value:"opacity-70"},{label:"Opacity 30",value:"opacity-60"},{label:"Opacity 70",value:"opacity-50"},{label:"Opacity 50",value:"opacity-40"},{label:"Opacity 30",value:"opacity-30"},{label:"Opacity 20",value:"opacity-20"},{label:"Mix blend multiply",value:"mix-blend-multiply"}],onChange:e=>C("imageEffect",e)})),(0,t.createElement)(a.PanelRow,null,(0,t.createElement)(a.SelectControl,{label:"Filter",value:p.imageFilter,options:[{label:"none",value:""},{label:"grayscale",value:"grayscale"},{label:"saturate 50",value:"saturate-50"},{label:"saturate 100",value:"saturate-100"},{label:"blur small",value:"blur-sm"},{label:"blur large",value:"blur-lg"},{label:"contrast",value:"contrast-50"}],onChange:e=>C("imageFilter",e)})),(0,t.createElement)(a.PanelRow,null,(0,t.createElement)(a.SelectControl,{label:"Scale",value:p.imageScale,options:[{label:"100%",value:""},{label:"95%",value:"scale-95"},{label:"90%",value:"scale-90"},{label:"75%",value:"scale-75"},{label:"50%",value:"scale-50"},{label:"105%",value:"scale-105"},{label:"110%",value:"scale-110"},{label:"125%",value:"scale-125"}],onChange:e=>C("imageScale",e)})))}const s=window.wp.data;function r(){return(0,t.createElement)("svg",{width:"25",height:"25",viewBox:"0 0 25 25",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,t.createElement)("rect",{width:"25",height:"25",fill:"white"}),(0,t.createElement)("path",{d:"M3 22V12C3 11.7348 3.10536 11.4804 3.29289 11.2929C3.48043 11.1054 3.73478 11 4 11H12C12.2652 11 12.5196 11.1054 12.7071 11.2929C12.8946 11.4804 13 11.7348 13 12V22C13 22.2652 12.8946 22.5196 12.7071 22.7071C12.5196 22.8946 12.2652 23 12 23H4C3.73478 23 3.48043 22.8946 3.29289 22.7071C3.10536 22.5196 3 22.2652 3 22ZM20 3H10C9.73478 3 9.48043 3.10536 9.29289 3.29289C9.10536 3.48043 9 3.73478 9 4V5H18.5C18.6326 5 18.7598 5.05268 18.8536 5.14645C18.9473 5.24021 19 5.36739 19 5.5V16H20C20.2652 16 20.5196 15.8946 20.7071 15.7071C20.8946 15.5196 21 15.2652 21 15V4C21 3.73478 20.8946 3.48043 20.7071 3.29289C20.5196 3.10536 20.2652 3 20 3ZM16 20C16.2652 20 16.5196 19.8946 16.7071 19.7071C16.8946 19.5196 17 19.2652 17 19V8C17 7.73478 16.8946 7.48043 16.7071 7.29289C16.5196 7.10536 16.2652 7 16 7H6C5.73478 7 5.48043 7.10536 5.29289 7.29289C5.10536 7.48043 5 7.73478 5 8V9H14.5C14.6326 9 14.7598 9.05268 14.8536 9.14645C14.9473 9.24021 15 9.36739 15 9.5V20H16Z",fill:"#4D439F"}))}function m(){return(0,t.createElement)("svg",{width:"25",height:"25",viewBox:"0 0 25 25",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,t.createElement)("rect",{width:"25",height:"25",fill:"white"}),(0,t.createElement)("path",{d:"M22 5H4C3.73478 5 3.48043 5.09877 3.29289 5.27459C3.10536 5.4504 3 5.68886 3 5.9375V19.0625C3 19.3111 3.10536 19.5496 3.29289 19.7254C3.48043 19.9012 3.73478 20 4 20H22C22.2652 20 22.5196 19.9012 22.7071 19.7254C22.8946 19.5496 23 19.3111 23 19.0625V5.9375C23 5.68886 22.8946 5.4504 22.7071 5.27459C22.5196 5.09877 22.2652 5 22 5ZM8 7.8125C8.39556 7.8125 8.78224 7.92247 9.11114 8.12849C9.44004 8.33452 9.69638 8.62736 9.84776 8.96997C9.99913 9.31258 10.0387 9.68958 9.96157 10.0533C9.8844 10.417 9.69392 10.7511 9.41421 11.0133C9.13451 11.2755 8.77814 11.4541 8.39018 11.5265C8.00222 11.5988 7.60008 11.5617 7.23463 11.4198C6.86918 11.2779 6.55682 11.0375 6.33706 10.7292C6.1173 10.4209 6 10.0583 6 9.6875C6 9.19022 6.21071 8.71331 6.58579 8.36167C6.96086 8.01004 7.46957 7.8125 8 7.8125ZM21 18.125H5V16.5622L9 13.4375L11.857 15.4466L17 10.625L21 15.6247V18.125Z",fill:"#4D439F"}))}function u(e){const l=(0,s.useSelect)((e=>e("core/block-editor").getBlocks())),n=(0,s.useSelect)((e=>{const{getSelectedBlock:t}=e("core/block-editor");return t()}),[]),o=(0,s.useDispatch)(),i=["customClass","customStyle","imageClass","imageProps","backgroundColor","textColor","style","verticalAlignment","isStackedOnMobile","width","height","className","animationsForBlocks","fontFamily","fontSize","level","hasCenteredContent","hasContainer","hasEqualColumns","desktopProps","tabletProps","mobileProps","gridClass","svgSize","hasColumns","hasColumnsMobile","gapX","gapY","innerClass","customFlex","customFlexClass"],c=e=>e.map((e=>{const t=(e=>{const t={};if(e.attributes)for(const l in e.attributes)i.includes(l)&&(t[l]=e.attributes[l]);return t})(e);if(e.innerBlocks.length>0){const l=c(e.innerBlocks);return{name:e.name,attributes:t,innerBlocks:l}}return{name:e.name,attributes:t,innerBlocks:[]}})),m=(e,t)=>e.map(((e,l)=>{var a,n;if(t[l]&&t[l].name===e.name){const c=e,s=t[l];if(c.innerBlocks.length>0&&s.innerBlocks.length>0&&m(c.innerBlocks,s.innerBlocks),c.name===s.name){const t={...e.attributes};for(const l in e.attributes)i.includes(l)&&(t[l]=s.attributes[l]);a=e.clientId,n=t,o("core/block-editor").updateBlockAttributes(a,n)}}}));return(0,t.createElement)(a.PanelBody,{title:e.title,icon:r,initialOpen:!1},(0,t.createElement)("div",null,(0,t.createElement)("p",{class:"my-16 block"},"Only works if the type & amount of elements within this layout are the same"),(0,t.createElement)("div",{className:"flex gap-8"},(0,t.createElement)(a.Button,{variant:"secondary",onClick:()=>(()=>{const e=c(l),t=JSON.stringify(e);localStorage.setItem("ponzo_copy",t)})()},"Copy All"),(0,t.createElement)(a.Button,{variant:"secondary",onClick:()=>(()=>{const e=JSON.parse(localStorage.getItem("ponzo_copy"));m(l,e)})()},"Paste All")),(0,t.createElement)("div",null,(0,t.createElement)("p",null,"Copy Single Block Style"),(0,t.createElement)("div",{className:"flex gap-8"},(0,t.createElement)(a.Button,{variant:"secondary",onClick:()=>(()=>{const e=[];e.push(n);const t=c(e),l=JSON.stringify(t);localStorage.setItem("ponzo_copy",l)})()},"Copy Block Style"),(0,t.createElement)(a.Button,{variant:"secondary",onClick:()=>(()=>{const e=[];e.push(n);const t=JSON.parse(localStorage.getItem("ponzo_copy"));m(e,t)})()},"Paste Block Style")))))}function p(e){const{media:l,imageClass:a,extraClass:n}=e,{url:o,alt:i,width:c,height:s,sizes:r}=l;let m=o,u=o,p=o;if(void 0!==r&&r.length>0){const{thumbnail:e,medium:t,large:l}=r}return(0,t.createElement)("picture",{className:"w-full h-full"},m?(0,t.createElement)("source",{media:"(max-width: 576px)",srcSet:m,className:`${a} ${n}`}):null,u?(0,t.createElement)("source",{media:"(min-width: 768px)",srcSet:u,className:`${a} ${n}`}):null,p?(0,t.createElement)("source",{media:"(min-width: 1200px)",srcSet:p,className:`${a} ${n}`}):null,u?(0,t.createElement)("img",{src:u,alt:i,className:`${a} ${n}`}):null)}function d(e){const{media:l,imageClass:a,extraClass:n}=e,{url:o,alt:i}=l;let c=o;return(0,t.createElement)("video",{className:"responsive-video",id:"player",playsinline:!0,controls:!0,autoplay:!0,muted:!0,loop:!0},(0,t.createElement)("source",{src:c,type:"video/mp4"}))}const C=JSON.parse('{"u2":"ponzoblocks/section"}');(0,e.registerBlockType)(C.u2,{example:{attributes:{message:"Section"}},icon:function(){return(0,t.createElement)("svg",{width:"50",height:"50",viewBox:"0 0 50 50",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,t.createElement)("rect",{width:"50",height:"50",fill:"white"}),(0,t.createElement)("rect",{x:"2",y:"2",width:"46",height:"46",rx:"10",fill:"url(#paint0_linear_1_19)"}),(0,t.createElement)("path",{d:"M36 23.7778H14V15.2222C14 14.8981 14.1288 14.5872 14.358 14.358C14.5872 14.1288 14.8981 14 15.2222 14H34.7778C35.1019 14 35.4128 14.1288 35.642 14.358C35.8712 14.5872 36 14.8981 36 15.2222V23.7778ZM15.2222 36H23.7778V26.2222H14V34.7778C14 35.1019 14.1288 35.4128 14.358 35.642C14.5872 35.8712 14.8981 36 15.2222 36ZM34.7778 36C35.1019 36 35.4128 35.8712 35.642 35.642C35.8712 35.4128 36 35.1019 36 34.7778V26.2222H26.2222V36H34.7778Z",fill:"white"}),(0,t.createElement)("defs",null,(0,t.createElement)("linearGradient",{id:"paint0_linear_1_19",x1:"53.5",y1:"11.5",x2:"25",y2:"48",gradientUnits:"userSpaceOnUse"},(0,t.createElement)("stop",{stopColor:"#414996"}),(0,t.createElement)("stop",{offset:"1",stopColor:"#B200F1"}))))},edit:function(e){let{attributes:n,setAttributes:o}=e;const i=(0,l.useBlockProps)(),{media:s,imageProps:r,imageClass:C,hasContainer:g,hasEqualColumns:h,hasCenteredContent:b}=n,f=["section--content",g?"container mx-auto":"w-full",b?"flex flex-col items-center":""].join(" "),{children:E,...v}=(0,l.useInnerBlocksProps)({className:f});return(0,t.createElement)("section",i,(0,t.createElement)(l.InspectorControls,null,(0,t.createElement)(a.PanelBody,{title:"Container",initialOpen:!0},(0,t.createElement)(a.PanelRow,null,(0,t.createElement)("fieldset",null,(0,t.createElement)(a.ToggleControl,{label:"Add container",help:g?"Has container":"No container.",checked:g,onChange:()=>{o({hasContainer:!g})}}))),(0,t.createElement)(a.PanelRow,null,(0,t.createElement)("fieldset",null,(0,t.createElement)(a.ToggleControl,{label:"Center content",help:h?"Has centered content":"No centerened content",checked:b,onChange:()=>{o({hasCenteredContent:!b})}})))),(0,t.createElement)(a.PanelBody,{title:"Background Image",icon:m,initialOpen:!0},(0,t.createElement)(c,{title:"Background Image",mediaProps:s,imageProps:r,mediaCallback:e=>(e=>{o({media:e})})(e),imagePropsCallback:(e,t)=>{((e,t)=>{o({imageProps:{...e},imageClass:t})})(e,t)}})),(0,t.createElement)(u,{title:"Copy & Paste Styles"})),(0,t.createElement)("div",v,E),s.id?(0,t.createElement)("div",{className:"absolute left-0 top-0 w-full h-full z-0"},s.type,(0,t.createElement)("div",{className:"absolute left-0 top-0 w-full h-full z-0"},"video"===s.type?(0,t.createElement)(d,{media:s,imageClass:C,extraClass:"absolute left-0 top-0 w-full h-full z-0"}):(0,t.createElement)(p,{media:s,imageClass:C,extraClass:"absolute left-0 top-0 w-full h-full z-0"}))):null)},save:function(e){let{attributes:a}=e;const n=l.useBlockProps.save(),{hasContainer:o,hasEqualColumns:i,hasCenteredContent:c,media:s,imageClass:r}=a,m=["section--content",o?"container mx-auto":"w-full",i?"tabled:grid tabled:grid-cols-2":"",c?"flex flex-col items-center":""].join(" "),{children:u,...C}=l.useInnerBlocksProps.save({className:m});return(0,t.createElement)("section",n,(0,t.createElement)("div",C,u),s.id?(0,t.createElement)("div",{className:"absolute left-0 top-0 w-full h-full z-0"},"video"===s.type?(0,t.createElement)(d,{media:s,imageClass:r,extraClass:"absolute left-0 top-0 w-full h-full z-0"}):(0,t.createElement)(p,{media:s,imageClass:r,extraClass:"absolute left-0 top-0 w-full h-full z-0"})):null)}})})();